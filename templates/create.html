{% extends "base.html" %}

{% block body %}
<form action="/create" method="post">
  <div class="mb-3 pb-3">
    <label  for="goal">目標</label>
    <label for="detail">:</label>        
    <input type="text" name="goal">
  </div>

  <div class="mb-3 pb-3">
    <label face='Times New Roman'  for="detail">詳細</label>
    <label for="detail">:</label>    
    <input type="text" name="detail">    
  </div>  

  <div class="mb-3 pb-3">
    <label for="achievement">達成度</label>
    <input type="range" min="0" max="100" step="1" id="achievement" name="achievement"> 
  </div>  

  <p id="msg"></p>

  <div class="mb-3 pb-3">
    <label for="create_at">日付</label>
    <input type="date" name="create_at" id="create_at">
  </div>
  <br>
  <a href="/" role="button" class="btn btn-primary" >Return</a>    
  <button type="submit" class="btn btn-outline-secondary" id="btn">Create</button>
</form>

<script type="text/javascript">

function inputChange(event){
  msg.innerText =  achievement.value + '%'; // コメントを入れられる場所
}

let slider = document.getElementById('achievement');
achievement.addEventListener('input', inputChange);
let msg = document.getElementById('msg');

    //今日の日時を表示
        window.onload = function () {
            //今日の日時を表示
            // 初期値を当日にする
            var date = new Date()
            var year = date.getFullYear()
            var month = date.getMonth() + 1
            var day = date.getDate()
          
            var toTwoDigits = function (num, digit) {
              num += ''
              if (num.length < digit) {
                num = '0' + num
              }
              return num
            }
            
            var yyyy = toTwoDigits(year, 4)
            var mm = toTwoDigits(month, 2)
            var dd = toTwoDigits(day, 2)
            var ymd = yyyy + "-" + mm + "-" + dd;
            
            document.getElementById("create_at").value = ymd;
        }
        
        // 記録されたらTrueを返して、失敗したらFalseを返すなどして、
        // それによって返すメッセージを変える
        btn.addEventListener('click', function() {
          window.confirm('今日もおつかれさま');
        })
        
</script>
{% endblock %}